{% extends 'base.html' %}




{% block content %}


 <!-- block content -->
         <div class="mt-2 da mb-2 border border-gray-300">
               <h2 class="da p-4 text-gray-700">Profile Settings</h2>
         </div>

<!-- content section -->
         <section class="flex justify-center min-h w-full">
            <div class="w-[30%] m-2 max-w-sm p-4 bg-white text-gray-500 border shadow-lg rounded-lg sm:p-6 md:p-8" style="border: 1px solid #63490a; height: 50%;">
               <!-- Profile Section -->
               <div class="flex flex-col items-center pb-10">
                   <img class="w-50 h-20 mb-3 border-4 border-white" src="{{ g.user['profile_image'] }}" alt="Profile Image"/>
               </div>
           
               <!-- Display Form Section -->
               <form class="space-y-6">
                   <div>
                       <label for="student_name" class="block mb-2 text-sm font-medium text-gray-600 dark:text-gray-600">Name:</label>
                       <input type="text" name="student_name" id="student_name" class="bg-white border border-gray-300 text-gray-900 text-sm rounded-full block w-full p-2.5 dark:bg-white dark:border-gray-300 dark:placeholder-gray-300 dark:text-gray-900" placeholder="{{ g.user['student_name'] }}" disabled />
                   </div>
                   <div>
                       <label for="matric_number" class="block mb-2 text-sm font-medium text-gray-600 dark:text-gray-600">Matric number:</label>
                       <input type="text" name="matric_number" id="matric_number" class="bg-white border border-gray-300 text-gray-900 text-sm rounded-full block w-full p-2.5 dark:bg-white dark:border-gray-300 dark:placeholder-gray-300 dark:text-gray-900" placeholder="{{ g.user['matric_number'] }}" disabled />
                   </div>
                   <div>
                       <label for="student_level" class="block mb-2 text-sm font-medium text-gray-600 dark:text-gray-600">Level:</label>
                       <input type="number" name="student_level" id="student_level" class="bg-white border border-gray-300 text-gray-900 text-sm rounded-full block w-full p-2.5 dark:bg-white dark:border-gray-300 dark:placeholder-gray-300 dark:text-gray-900" placeholder="{{ g.user['student_level'] }}" disabled />
                   </div>
               </form>
           </div>
           
           <!-- second div -->
    <div class="settings flex flex-col w-[70%]">
        <div class="form-container ">

      

            <form id="contactForm">
                <div class="w-full flex h-12 py-4 px-4 mt-4 mb-8 text-sm text-white rounded-sm" style="background-color: #fbc23d;" role="alert">
                    <svg class="flex-shrink-0 inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 20 20" style="float: left;">
                      <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
                    </svg>
                    <span class="sr-only">Info</span>
                    <div class="" style="margin-right: 24rem;">
                      <span class="font-medium">Edit</span>Details
                    </div>
                
                    <div class="edit-icon">
                        <ion-icon id="editIcon" name="lock-closed-outline"></ion-icon>
                      </div>
                  </div> 

              <label for="phone">Phone:</label>
              <input class="rounded-full" type="text" id="phone" placeholder="Enter your phone number" disabled>
        
              <label for="email">Email:</label>
              <input class="rounded-full" type="email" id="email" placeholder="Enter your email address" disabled>
        
              <button type="button" id="saveButton" class="save-button" style="width: 20%; float: right;">Update</button>
            </form>
          </div>
        
          <div class="form-container">

            <div class="w-full flex h-12 py-4 px-4 mt-4 mb-8 text-sm text-white rounded-sm" style="background-color: #fbc23d;" role="alert">
                <svg class="flex-shrink-0 inline w-4 h-4 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 20 20" style="float: left;">
                  <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
                </svg>
                <span class="sr-only">Info</span>
                <div class="" style="margin-right: 23rem;">
                  <span class="font-medium">Edit</span>Password
                </div>
            
                <div class="edit-icon">
                    <ion-icon id="editPasswordIcon" name="lock-closed-outline"></ion-icon>
                  </div>
              </div> 

            <!-- <h2>Change Password</h2> -->
            <form id="passwordForm">
              <label for="oldPassword">Old Password:</label>
              <input class="rounded-full" type="password" id="oldPassword" placeholder="Enter old password" disabled>
        
              <label for="newPassword">New Password:</label>
              <input class="rounded-full" type="password" id="newPassword" placeholder="Enter new password" disabled>
        
              <label for="confirmPassword">Confirm Password:</label>
              <input class="rounded-full" type="password" id="confirmPassword" placeholder="Confirm new password" disabled>
        
           
            <button type="button" id="savePasswordButton" class="save-button" style="width: 20%; float: right;">Update</button>
            </form>
          </div>
        
       
    </div>
         </section>


<!-- end of block content -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const phoneInput = document.getElementById('phone');
    const emailInput = document.getElementById('email');
    const editIcon = document.getElementById('editIcon');
    const saveButton = document.getElementById('saveButton');
    const oldPasswordInput = document.getElementById('oldPassword');
    const newPasswordInput = document.getElementById('newPassword');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    const editPasswordIcon = document.getElementById('editPasswordIcon');
    const savePasswordButton = document.getElementById('savePasswordButton');

    // Load saved values from localStorage
    phoneInput.value = localStorage.getItem('phone') || '';
    emailInput.value = localStorage.getItem('email') || '';
    saveButton.disabled = true;
    saveButton.style.backgroundColor = 'gray';
    savePasswordButton.disabled = true;
    savePasswordButton.style.backgroundColor = 'gray';

    editIcon.addEventListener('click', function () {
      const isDisabled = phoneInput.disabled;
      phoneInput.disabled = !isDisabled;
      emailInput.disabled = !isDisabled;
      saveButton.disabled = isDisabled;
      saveButton.style.backgroundColor = isDisabled ? '#fbc23d' : 'gray';
      if (!isDisabled) {
        phoneInput.style.color = 'gray';
        emailInput.style.color = 'gray';
        this.setAttribute('name', 'lock-closed-outline');
      } else {
        phoneInput.style.color = 'black';
        emailInput.style.color = 'black';
        saveButton.style.display = 'block';
        this.setAttribute('name', 'lock-open-outline');
      }
    });

    saveButton.addEventListener('click', function () {
      phoneInput.disabled = true;
      emailInput.disabled = true;
      phoneInput.style.color = 'gray';
      emailInput.style.color = 'gray';
      localStorage.setItem('phone', phoneInput.value);
      localStorage.setItem('email', emailInput.value);
      saveButton.disabled = true;
      saveButton.style.backgroundColor = 'gray';
      editIcon.setAttribute('name', 'lock-closed-outline');
    });

    editPasswordIcon.addEventListener('click', function () {
      const isDisabled = oldPasswordInput.disabled;
      oldPasswordInput.disabled = !isDisabled;
      newPasswordInput.disabled = !isDisabled;
      confirmPasswordInput.disabled = !isDisabled;
      savePasswordButton.disabled = isDisabled;
      savePasswordButton.style.backgroundColor = isDisabled ? '#fbc23d' : 'gray';
      if (!isDisabled) {
        oldPasswordInput.style.color = 'gray';
        newPasswordInput.style.color = 'gray';
        confirmPasswordInput.style.color = 'gray';
        this.setAttribute('name', 'lock-closed-outline');
      } else {
        oldPasswordInput.style.color = 'black';
        newPasswordInput.style.color = 'black';
        confirmPasswordInput.style.color = 'black';
        savePasswordButton.style.display = 'block';
        this.setAttribute('name', 'lock-open-outline');
      }
    });

    savePasswordButton.addEventListener('click', function () {
      const newPassword = newPasswordInput.value;
      const confirmPassword = confirmPasswordInput.value;

      if (newPassword === confirmPassword) {
        localStorage.setItem('password', newPassword);
        oldPasswordInput.value = '';
        newPasswordInput.value = '';
        confirmPasswordInput.value = '';
        oldPasswordInput.disabled = true;
        newPasswordInput.disabled = true;
        confirmPasswordInput.disabled = true;
        oldPasswordInput.style.color = 'gray';
        newPasswordInput.style.color = 'gray';
        confirmPasswordInput.style.color = 'gray';
        savePasswordButton.disabled = true;
        savePasswordButton.style.backgroundColor = 'gray';
        editPasswordIcon.setAttribute('name', 'lock-closed-outline');
      } else {
        alert('New passwords do not match');
      }
    });
  });
</script>




{% endblock %}
 

